<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <!-- ============================================================ -->
    <!-- Menu racine                                                  -->
    <!-- ============================================================ -->
    <menuitem
        id="isic_approbation_menu_root"
        name="Approbations"
        sequence="20"
        web_icon="isic_approbation,static/description/icon.png"
    />

    <!-- ============================================================ -->
    <!-- Sous-menus                                                   -->
    <!-- ============================================================ -->
    <menuitem
        id="isic_approbation_menu_demandes"
        name="Toutes les demandes"
        parent="isic_approbation_menu_root"
        action="isic_approbation_demande_action"
        sequence="10"
    />

    <menuitem
        id="isic_approbation_menu_my"
        name="Mes demandes"
        parent="isic_approbation_menu_root"
        action="isic_approbation_demande_action_my"
        sequence="20"
    />

    <menuitem
        id="isic_approbation_menu_approve"
        name="À approuver"
        parent="isic_approbation_menu_root"
        action="isic_approbation_demande_action_approve"
        sequence="30"
    />

    <!-- ============================================================ -->
    <!-- Configuration                                                -->
    <!-- ============================================================ -->
    <menuitem
        id="isic_approbation_menu_config"
        name="Configuration"
        parent="isic_approbation_menu_root"
        sequence="90"
        groups="isic_base.group_isic_direction"
    />

    <menuitem
        id="isic_approbation_menu_categories"
        name="Catégories"
        parent="isic_approbation_menu_config"
        action="isic_approbation_categorie_action"
        sequence="10"
    />

    <!-- Lien vers la config tier.definition filtrée sur notre modèle -->
    <record id="isic_approbation_tier_def_action" model="ir.actions.act_window">
        <field name="name">Circuits d'approbation</field>
        <field name="res_model">tier.definition</field>
        <field name="view_mode">list,form</field>
        <field name="domain">[('model', '=', 'isic.approbation.demande')]</field>
        <field name="context" eval="{'default_model_id': ref('model_isic_approbation_demande')}" />
    </record>

    <menuitem
        id="isic_approbation_menu_tier_defs"
        name="Circuits d'approbation"
        parent="isic_approbation_menu_config"
        action="isic_approbation_tier_def_action"
        sequence="20"
    />
</odoo>
